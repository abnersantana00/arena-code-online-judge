{% extends "base.html" %}

{% block content %}

<div class=" my-2">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb breadcrumb-chevron p-3 bg-body-tertiary rounded-3">
      <li class="breadcrumb-item">
        <a class="link-body-emphasis" href="\">
         <i class="bi bi-house-door"></i>
          <span class="visually-hidden">Home</span>
        </a>
      </li>
        <li class="breadcrumb-item">
        <a class="link-body-emphasis fw-semibold text-decoration-none" href="/">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a class="link-body-emphasis fw-semibold text-decoration-none" href="/{{topic}}">{{topic}}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
          <a class="link-body-emphasis fw-semibold text-decoration-none" href=""> {{topic_name}} </a>
      </li>
        <li class="breadcrumb-item active" aria-current="page">
        Submit Code
      </li>
    </ol>
  </nav>
</div>

<section>

    <div class="row">
        <div class="col-8">
            <div class="card">
                <div class="card-body">
                        <b class="fw-bold py-2">{{one_question.title}} </b> <br><br>

                        <p> {{one_question.stem | safe}} </p>
                        <br><br>

                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th scope="col">Input Sample</th>
                                    <th scope="col">Output Sample</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for expected_input, expected_output in expected %}
                                <tr>
                                    <td>{{ expected_input }}</td>
                                    <td>{{ expected_output }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        <div class="col">
           <div class="card">
                <div class="card-body">
                        <h3> Escreva seu c√≥digo aqui </h3>
                        <form method="post" action="#">
                            {% csrf_token %}
                            <div id="editor">{{ code|default:'' }}</div>
                            <textarea name="code" id="code" style="display: none;"></textarea>
                            <button type="submit">Save</button>
                        </form>
                </div>
           </div>
        </div>

    </div>



</section>
<br>

<section>
    <h5>Problem: {{one_question.topic_id}} | Question :  {{one_question.problem_id}}  | Language: Python 3.12.3 </h5>
    <form  method="POST" action="{% url 'source_code' topic=topic topic_name=topic_name problem_id=problem_id  %}">
        {% csrf_token %}
        <textarea name="code_submission"  placeholder="Write your code here..."></textarea>
        <input type="submit" value="Submit Code">
    </form>

<br><br><br>
</section>

<script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/github_dark");
        editor.session.setMode("ace/mode/python");

        // Sync the ACE Editor content with the textarea before form submission
        document.querySelector('form').addEventListener('submit', function() {
            document.getElementById('code').value = editor.getValue();
        });
</script>


{% endblock %}



